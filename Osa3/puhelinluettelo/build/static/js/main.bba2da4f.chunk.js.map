{"version":3,"sources":["services.js","index.js"],"names":["baseurl","axios","get","then","res","data","newPerson","post","id","console","log","delete","Notification","message","status","className","Person","person","handleDelete","name","number","onClick","Phonebook","people","map","NewPerson","props","onSubmit","addPerson","value","newName","onChange","changeName","newNumber","changeNumber","type","FilterPeople","filterName","changeFilter","App","useState","persons","setPersons","setNewName","setNewNumber","setFilterName","setMessage","setStatus","React","useEffect","services","shownPersons","filter","p","toLowerCase","includes","event","target","preventDefault","concat","catch","err","JSON","stringify","response","error","window","confirm","setTimeout","ReactDOM","render","document","getElementById"],"mappings":"8MAGMA,EAAU,eAwBD,EAtBA,WAEf,OADYC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAoBZ,EAjBS,SAACC,GAEzB,OADYL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAG,OAAIA,EAAIC,SAeZ,EAZM,SAACG,GAGlB,OAFAC,QAAQC,IAAR,UAAeV,EAAf,YAA0BQ,IACdP,IAAMU,OAAN,UAAgBX,EAAhB,YAA2BQ,IAC5BL,QCbTS,G,MAAe,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,QAASC,EAAa,EAAbA,OAC/B,OAAgB,OAAZD,EACK,KAGL,qBAAKE,UAAWD,EAAS,YAAc,QAAvC,SACGD,MAMHG,EAAS,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,aACxB,OACE,kCAAKD,EAAOE,KAAZ,IAAmBF,EAAOG,OACxB,wBAAQC,QAAS,kBAAMH,EAAaD,EAAOT,GAAIS,EAAOE,OAAtD,0BAKAG,EAAY,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,OAAQL,EAAmB,EAAnBA,aAC3B,OACEK,EAAOC,KAAI,SAAAP,GAAM,OACf,cAAC,EAAD,CAA0BA,OAAQA,EAAQC,aAAcA,GAA3CD,EAAOE,UAIpBM,EAAY,SAACC,GACjB,OACE,qCAAE,gDACA,uBAAMC,SAAUD,EAAME,UAAtB,UACE,wCAEE,uBAAOC,MAAOH,EAAMI,QAASC,SAAUL,EAAMM,gBAE/C,0CAEE,uBAAOH,MAAOH,EAAMO,UAAWF,SAAUL,EAAMQ,kBAEjD,8BACE,wBAAQC,KAAK,SAAb,0BAOJC,EAAe,SAACV,GACpB,OACE,qCACE,oDACA,uBAAOG,MAAOH,EAAMW,WAAYN,SAAUL,EAAMY,mBAKhDC,EAAM,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTC,EADS,KACAC,EADA,OAEcF,mBAAS,IAFvB,mBAETV,EAFS,KAEAa,EAFA,OAGkBH,mBAAS,IAH3B,mBAGTP,EAHS,KAGEW,EAHF,OAIoBJ,mBAAS,IAJ7B,mBAITH,EAJS,KAIGQ,EAJH,OAKcL,mBAAS,MALvB,mBAKT3B,EALS,KAKAiC,EALA,OAMYN,oBAAS,GANrB,mBAMT1B,EANS,KAMDiC,EANC,KAQhBC,IAAMC,WAAU,kBACdC,IAAkB/C,MAAK,SAAAoB,GAAM,OAC3BmB,EAAWnB,QACX,IAEJ,IAAM4B,EAAeV,EAAQW,QAAO,SAAAC,GAAC,OACnCA,EAAElC,KAAKmC,cAAcC,SAASlB,EAAWiB,kBAwE7C,OACE,gCACE,cAAC,EAAD,CAAczC,QAASA,EAASC,OAAQA,IACxC,2CACA,cAAC,EAAD,CAAcuB,WAAYA,EAAYC,aAlEnB,SAACkB,GACpBX,EAAcW,EAAMC,OAAO5B,UAkE3B,cAAC,EAAD,CAAWD,UA/DK,SAAC4B,GACjBA,EAAME,iBAuBNR,EArBkB,CAChB/B,KAAMW,EACNV,OAAQa,IAoBP9B,MAAK,SAAAC,GACJsC,EAAWD,EAAQkB,OAAOvD,IAC1B0C,EAAW,cAAD,OAAehB,EAAf,8BACViB,GAAU,MAEXa,OAAM,SAAAC,GACLf,EAAWgB,KAAKC,UAAUF,EAAIG,SAAS3D,KAAK4D,QAC5ClB,GAAU,MAGdJ,EAAW,IACXC,EAAa,KA2BoBd,QAASA,EAASE,WA3ElC,SAACwB,GAClBb,EAAWa,EAAMC,OAAO5B,QA0EmDI,UAAWA,EAAWC,aAvE9E,SAACsB,GACpBZ,EAAaY,EAAMC,OAAO5B,UAuE1B,yCACA,cAAC,EAAD,CAAWN,OAAQ4B,EAAcjC,aAzBhB,SAACV,EAAIW,GACT+C,OAAOC,QAAP,iBAAyBhD,MAEtC+B,EAAsB1C,GAAIL,MAAK,SAAAC,GAC7BsC,EAAWD,EAAQW,QAAO,SAAAC,GAAC,OAAIA,EAAE7C,KAAOA,MACxCsC,EAAW,UAAD,OAAW3B,EAAX,kCACV4B,GAAU,MAETa,OAAM,SAAAC,GACLf,EAAWgB,KAAKC,UAAUF,EAAIG,SAAS3D,OACvC0C,GAAU,MAEdqB,YAAW,WACTtB,EAAW,QACV,aAgBPuB,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,SAElCjC,c","file":"static/js/main.bba2da4f.chunk.js","sourcesContent":["/* eslint-disable import/no-anonymous-default-export */\r\nimport axios from 'axios'; \r\n\r\nconst baseurl = '/api/persons'; \r\n\r\nconst getAll = () => {\r\nconst req = axios.get(baseurl)\r\nreturn req.then(res => res.data)\r\n}\r\n\r\nconst createNewPerson = (newPerson) => {\r\nconst req = axios.post(baseurl, newPerson)\r\nreturn req.then(res => res.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    console.log(`${baseurl}/${id}`)\r\n    const req = axios.delete(`${baseurl}/${id}`)\r\n    return req.then()\r\n}\r\n\r\nconst updatePerson = (id, newPerson) => {\r\n    console.log(newPerson)\r\n    const req = axios.put(`${baseurl}/${id}`, newPerson)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nexport default {getAll, createNewPerson, deletePerson, updatePerson};","import React, { useState } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport services from './services'\r\nimport './index.css';\r\n\r\nconst Notification = ({ message, status }) => {\r\n  if (message === null) {\r\n    return null\r\n  } else {\r\n    return (\r\n      <div className={status ? 'succesess' : 'error'}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst Person = ({ person, handleDelete }) => {\r\n  return (\r\n    <p> {person.name} {person.number}\r\n      <button onClick={() => handleDelete(person.id, person.name)}> Delete </button>\r\n    </p>\r\n  )\r\n}\r\n\r\nconst Phonebook = ({ people, handleDelete }) => {\r\n  return (\r\n    people.map(person =>\r\n      <Person key={person.name} person={person} handleDelete={handleDelete} />\r\n    ))\r\n}\r\n\r\nconst NewPerson = (props) => {\r\n  return (\r\n    <><h2>Add new person</h2>\r\n      <form onSubmit={props.addPerson}>\r\n        <div>\r\n          name:\r\n          <input value={props.newName} onChange={props.changeName} />\r\n        </div>\r\n        <div>\r\n          number:\r\n          <input value={props.newNumber} onChange={props.changeNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  )\r\n}\r\n\r\nconst FilterPeople = (props) => {\r\n  return (\r\n    <>\r\n      <p>filter shown with: </p>\r\n      <input value={props.filterName} onChange={props.changeFilter} ></input>\r\n    </>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filterName, setFilterName] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n  const [status, setStatus] = useState(false)\r\n\r\n  React.useEffect(() =>\r\n    services.getAll().then(people =>\r\n      setPersons(people))\r\n    , []);\r\n\r\n  const shownPersons = persons.filter(p =>\r\n    p.name.toLowerCase().includes(filterName.toLowerCase()));\r\n\r\n  const changeName = (event) => {\r\n    setNewName(event.target.value);\r\n  }\r\n\r\n  const changeNumber = (event) => {\r\n    setNewNumber(event.target.value);\r\n  }\r\n\r\n  const changeFilter = (event) => {\r\n    setFilterName(event.target.value);\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    //const existingPerson = persons.filter(p => p.name === newName)\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    /*if (existingPerson.length > 0) {\r\n      setMessage('Person already exists')\r\n      setStatus(false)\r\n      services.updatePerson(existingPerson[0].id, newPerson)\r\n      .then(res => {\r\n        setPersons(persons.map(p => p.name !== newName ? p : newPerson))\r\n        setMessage(`Information of person ${newName} updated!`)\r\n        setStatus(true)})\r\n      .catch(err => {\r\n        setMessage(err.response.data)\r\n        setStatus(false)})\r\n      setTimeout(() => {\r\n        setMessage(null,false)\r\n      }, 5000)\r\n      setNewName('')\r\n      setNewNumber('')\r\n    }*/\r\n    services.createNewPerson(newPerson)\r\n      .then(res => {\r\n        setPersons(persons.concat(res))\r\n        setMessage(`New person ${newName} added to your phonebook!`)\r\n        setStatus(true)\r\n      })\r\n      .catch(err => {\r\n        setMessage(JSON.stringify(err.response.data.error))\r\n        setStatus(false)\r\n      })\r\n   \r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n\r\nconst handleDelete = (id, name) => {\r\n  const result = window.confirm(`Delete ${name}`);\r\n  if (result) {\r\n    services.deletePerson(id).then(res => {\r\n      setPersons(persons.filter(p => p.id !== id))\r\n      setMessage(`Person ${name} deleted from your phonebook!`)\r\n      setStatus(true)\r\n    })\r\n      .catch(err => {\r\n        setMessage(JSON.stringify(err.response.data))\r\n        setStatus(false)\r\n      })\r\n    setTimeout(() => {\r\n      setMessage(null)\r\n    }, 5000)\r\n  }\r\n}\r\n\r\nreturn (\r\n  <div>\r\n    <Notification message={message} status={status} />\r\n    <h2>Phonebook</h2>\r\n    <FilterPeople filterName={filterName} changeFilter={changeFilter} />\r\n    <NewPerson addPerson={addPerson} newName={newName} changeName={changeName} newNumber={newNumber} changeNumber={changeNumber} />\r\n    <h2>Numbers</h2>\r\n    <Phonebook people={shownPersons} handleDelete={handleDelete} />\r\n  </div>\r\n)\r\n\r\n}\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\nexport default App"],"sourceRoot":""}